---
// Experience Component
const experiences = [
  {
    date: "2024 - Present",
    position: "Software Engineer",
    company: "Momenge",
    description:
      "Developing an instant messaging application using Fastify, PostgreSQL, React Native and Socket.io. Implementing real-time event logic, multimedia handling, and account recovery systems.",
  },
  {
    date: "2021 - 2024",
    position: "Full Stack Developer",
    company: "WeAre Dev",
    description:
      "Designed and developed a remittance platform from scratch using Node.js, React, and PostgreSQL. Led migration of legacy systems for online payments and loan management, modernizing critical financial infrastructure.",
  },
  {
    date: "2020 - 2021",
    position: "Full Stack Developer",
    company: "O.S Group",
    description:
      "Built a comprehensive platform for credit management and payment processing using NestJS and Vue.js. Focused on creating secure, scalable financial solutions with robust user interfaces.",
  },
  {
    date: "2019 - 2020",
    position: "Web & Mobile Developer",
    company: "PLM Group",
    description:
      "Developed web and mobile applications for El Dorado Airport's official website. Integrated services for users, flights, and COVID surveys, handling high-traffic airport operations.",
  },
  {
    date: "2018 - 2019",
    position: "Lead Software Developer",
    company: "Sumimedical",
    description:
      "Led development of comprehensive healthcare software with patient management, inventory control, real-time chat, and multi-database integration (SQL Server, PostgreSQL, MySQL).",
  },
];
---

<section id="experience" class="experience-section">
  <div class="container">
    <!-- Section Header -->
    <div class="section-header">
      <h2 class="section-title">
        <span class="title-number">02.</span>
        Experience
      </h2>
      <div class="title-underline"></div>
    </div>

    <!-- Experience Content -->
    <div class="experience-content">
      <!-- Introduction -->
      <div class="experience-intro">
        <p class="intro-text">
          With over 7 years of experience in software development, I've had the
          opportunity to work across various industries and technologies. From
          healthcare systems to financial platforms, I've contributed to
          building robust, scalable solutions that serve real-world needs.
        </p>
      </div>

      <!-- Experience Timeline -->
      <div class="experience-timeline">
        <div class="timeline">
          {
            experiences.map((experience, index) => (
              <div class="timeline-item">
                <div class="timeline-marker" />
                <div class="timeline-content">
                  <div class="timeline-date">{experience.date}</div>
                  <h4 class="timeline-job">{experience.position}</h4>
                  <p class="timeline-company">{experience.company}</p>
                  <p class="timeline-description">{experience.description}</p>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Intersection Observer for viewport-triggered animations
  document.addEventListener("DOMContentLoaded", () => {
    const experienceSection = document.querySelector(".experience-section");

    // Ensure the element exists
    if (!experienceSection) return;

    // Check if user prefers reduced motion
    const prefersReducedMotion = window.matchMedia(
      "(prefers-reduced-motion: reduce)"
    ).matches;

    if (prefersReducedMotion) {
      // If user prefers reduced motion, show section immediately
      experienceSection.classList.add("animate");
      return;
    }

    // Create intersection observer
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            // Add animation class when section enters viewport
            entry.target.classList.add("animate");
            // Stop observing this element once it's animated
            observer.unobserve(entry.target);
          }
        });
      },
      {
        // Trigger when 20% of the section is visible
        threshold: 0.2,
        // Add some margin to trigger slightly before entering viewport
        rootMargin: "0px 0px -50px 0px",
      }
    );

    // Observe the entire experience section
    observer.observe(experienceSection);
  });
</script>

<style>
  .experience-section {
    padding: 2rem 0 4rem 0;
    position: relative;
    z-index: 1;
    background: rgba(255, 255, 255, 0.01);
  }

  .container {
    margin: 0 auto;
    width: 100%;
    max-width: 1250px;
    padding: 0 0.75rem;
  }

  /* Section Header */
  .section-header {
    margin-bottom: 2rem;
    text-align: center;
  }

  .section-title {
    font-family: "Inter", "Segoe UI", system-ui, sans-serif;
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    color: white;
    flex-wrap: wrap;
  }

  .title-number {
    background: linear-gradient(90deg, #00d4ff 0%, #9c40ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 1.2rem;
    font-weight: 400;
  }

  .title-underline {
    width: 80px;
    height: 2px;
    background: linear-gradient(90deg, #00d4ff 0%, #9c40ff 100%);
    margin: 0 auto;
    border-radius: 1px;
  }

  /* Experience Content */
  .experience-content {
    display: grid;
    gap: 2.5rem;
  }

  /* Introduction */
  .experience-intro {
    text-align: center;
    max-width: 100%;
    margin: 0 auto;
    padding: 0 0.5rem;
  }

  .intro-text {
    font-size: 0.95rem;
    color: rgba(255, 255, 255, 0.8);
    line-height: 1.6;
    font-family: "Inter", "Segoe UI", system-ui, sans-serif;
  }

  /* Experience Timeline */
  .experience-timeline {
    position: relative;
  }

  .timeline {
    position: relative;
    padding-left: 1.5rem;
    max-width: 100%;
    margin: 0 auto;
  }

  .timeline::before {
    content: "";
    position: absolute;
    left: 0.75rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, #00d4ff 0%, #9c40ff 50%, #ff006e 100%);
  }

  .timeline-item {
    position: relative;
    padding-bottom: 2rem;
    margin-left: 0.75rem;
  }

  .timeline-item:last-child {
    padding-bottom: 0;
  }

  .timeline-marker {
    position: absolute;
    left: -1.5rem;
    top: 0.5rem;
    width: 10px;
    height: 10px;
    background: #00d4ff;
    border-radius: 50%;
    border: 2px solid rgba(0, 0, 0, 0.5);
    box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.3);
    z-index: 2;
  }

  .timeline-content {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 1.25rem;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    margin-right: 0.5rem;
  }

  .timeline-content::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, #00d4ff, #9c40ff);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .timeline-content:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(0, 212, 255, 0.3);
    transform: translateX(5px);
  }

  .timeline-content:hover::before {
    opacity: 1;
  }

  .timeline-date {
    color: #00d4ff;
    font-size: 0.8rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
    font-family: "Inter", "Segoe UI", system-ui, sans-serif;
  }

  .timeline-job {
    color: white;
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    font-family: "Inter", "Segoe UI", system-ui, sans-serif;
    line-height: 1.3;
  }

  .timeline-company {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.9rem;
    margin-bottom: 0.75rem;
    font-weight: 500;
  }

  .timeline-description {
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.85rem;
    line-height: 1.5;
    font-family: "Inter", "Segoe UI", system-ui, sans-serif;
  }

  /* Responsive Design */
  @media (min-width: 480px) {
    .experience-section {
      padding: 3rem 0 5rem 0;
    }

    .container {
      padding: 0 1rem;
    }

    .section-title {
      font-size: 2rem;
      gap: 0.75rem;
    }

    .title-number {
      font-size: 1.3rem;
    }

    .title-underline {
      width: 90px;
    }

    .experience-content {
      gap: 3rem;
    }

    .intro-text {
      font-size: 1rem;
      line-height: 1.7;
    }

    .timeline {
      padding-left: 2rem;
      max-width: 600px;
    }

    .timeline::before {
      left: 1rem;
    }

    .timeline-marker {
      left: -2rem;
      width: 12px;
      height: 12px;
      border: 3px solid rgba(0, 0, 0, 0.5);
      box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.3);
    }

    .timeline-content {
      padding: 1.5rem;
      border-radius: 10px;
      margin-right: 0;
    }

    .timeline-content:hover {
      transform: translateX(8px);
    }

    .timeline-date {
      font-size: 0.85rem;
    }

    .timeline-job {
      font-size: 1.15rem;
    }

    .timeline-company {
      font-size: 0.95rem;
      margin-bottom: 0.85rem;
    }

    .timeline-description {
      font-size: 0.9rem;
      line-height: 1.6;
    }
  }
  @media (min-width: 768px) {
    .experience-section {
      padding: 4rem 0 6rem 0;
    }

    .container {
      padding: 0 2rem;
    }

    .section-header {
      margin-bottom: 3rem;
    }

    .section-title {
      font-size: 2.5rem;
      gap: 1rem;
    }

    .title-number {
      font-size: 1.5rem;
    }

    .title-underline {
      width: 100px;
    }

    .experience-intro {
      max-width: 700px;
    }

    .intro-text {
      font-size: 1.05rem;
    }

    .timeline {
      max-width: 800px;
    }

    .timeline-content {
      padding: 2rem;
      border-radius: 12px;
    }

    .timeline-content:hover {
      transform: translateX(10px);
    }

    .timeline-date {
      font-size: 0.9rem;
    }

    .timeline-job {
      font-size: 1.25rem;
    }

    .timeline-company {
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .timeline-description {
      font-size: 0.95rem;
    }
  }

  @media (min-width: 1024px) {
    .container {
      padding: 0 3rem;
    }

    .section-title {
      font-size: 3rem;
    }

    .experience-intro {
      max-width: 800px;
    }

    .intro-text {
      font-size: 1.1rem;
      line-height: 1.7;
    }

    /* Zigzag Timeline Layout for Desktop */
    .timeline {
      max-width: 1000px;
      padding-left: 0;
      padding-right: 0;
    }

    .timeline::before {
      left: 50%;
      transform: translateX(-50%);
    }

    .timeline-item {
      margin-left: 0;
      width: 100%;
      display: flex;
      justify-content: flex-end;
      align-items: flex-start;
    }

    .timeline-item:nth-child(even) {
      justify-content: flex-start;
    }

    .timeline-item:nth-child(even) .timeline-content {
      margin-left: 2rem;
    }

    .timeline-content {
      width: 45%;
      margin-right: 2rem;
      margin-left: 0;
    }

    .timeline-marker {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 16px;
      height: 16px;
      border: 4px solid rgba(0, 0, 0, 0.5);
      box-shadow: 0 0 0 4px rgba(0, 212, 255, 0.3);
    }

    .timeline-content:hover {
      transform: translateY(-5px);
    }

    .timeline-item:nth-child(even) .timeline-content:hover {
      transform: translateY(-5px);
    }

    /* Add connecting lines from content to center */
    .timeline-content::after {
      content: "";
      position: absolute;
      top: 1.5rem;
      right: -2rem;
      width: 2rem;
      height: 2px;
      background: linear-gradient(
        90deg,
        rgba(0, 212, 255, 0.5),
        rgba(0, 212, 255, 0.2)
      );
      z-index: 1;
    }

    .timeline-item:nth-child(even) .timeline-content::after {
      left: -2rem;
      right: auto;
      background: linear-gradient(
        90deg,
        rgba(0, 212, 255, 0.2),
        rgba(0, 212, 255, 0.5)
      );
    }

    .timeline-job {
      font-size: 1.3rem;
    }

    .timeline-company {
      font-size: 1.05rem;
    }
  }

  @media (min-width: 1200px) {
    .section-title {
      font-size: 3.5rem;
    }

    .experience-content {
      gap: 4rem;
    }

    /* Enhanced zigzag layout for larger screens */
    .timeline {
      max-width: 1200px;
    }

    .timeline-content {
      width: 42%;
      padding: 2.5rem;
    }

    .timeline-content::after {
      width: 2.5rem;
      right: -2.5rem;
    }

    .timeline-item:nth-child(even) .timeline-content::after {
      left: -2.5rem;
      width: 2.5rem;
    }
  }

  /* Animation keyframes for zigzag effect */
  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Touch device optimizations */
  @media (hover: none) and (pointer: coarse) {
    .timeline-content {
      padding: 1.5rem;
    }

    .timeline-content:hover {
      transform: none;
    }
  }

  /* Viewport-triggered animations - entire section at once */
  @media (prefers-reduced-motion: no-preference) and (max-width: 1023px) {
    .timeline-item {
      opacity: 0;
      transform: translateY(30px);
      transition:
        opacity 0.6s ease,
        transform 0.6s ease;
    }

    /* Animation classes that will be added by JavaScript */
    .experience-section.animate .timeline-item {
      opacity: 1;
      transform: translateY(0);
    }

    .experience-section.animate .timeline-item:nth-child(1) {
      transition-delay: 0.1s;
    }
    .experience-section.animate .timeline-item:nth-child(2) {
      transition-delay: 0.2s;
    }
    .experience-section.animate .timeline-item:nth-child(3) {
      transition-delay: 0.3s;
    }
    .experience-section.animate .timeline-item:nth-child(4) {
      transition-delay: 0.4s;
    }
    .experience-section.animate .timeline-item:nth-child(5) {
      transition-delay: 0.5s;
    }
  }

  /* Zigzag animation for desktop only */
  @media (prefers-reduced-motion: no-preference) and (min-width: 1024px) {
    .timeline-item .timeline-content {
      opacity: 0;
      transition:
        opacity 0.8s ease-out,
        transform 0.8s ease-out;
    }

    .timeline-item:nth-child(odd) .timeline-content {
      transform: translateX(-50px);
    }

    .timeline-item:nth-child(even) .timeline-content {
      transform: translateX(50px);
    }

    /* Animation classes that will be added by JavaScript */
    .experience-section.animate .timeline-item .timeline-content {
      opacity: 1;
      transform: translateX(0);
    }

    .experience-section.animate .timeline-item:nth-child(1) .timeline-content {
      transition-delay: 0.2s;
    }
    .experience-section.animate .timeline-item:nth-child(2) .timeline-content {
      transition-delay: 0.4s;
    }
    .experience-section.animate .timeline-item:nth-child(3) .timeline-content {
      transition-delay: 0.6s;
    }
    .experience-section.animate .timeline-item:nth-child(4) .timeline-content {
      transition-delay: 0.8s;
    }
    .experience-section.animate .timeline-item:nth-child(5) .timeline-content {
      transition-delay: 1s;
    }
  }
</style>
