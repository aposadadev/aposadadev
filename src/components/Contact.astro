---
// Contact Component
import { useTranslations } from "../i18n/utils";

interface Props {
  lang?: "en" | "es";
}

const { lang = "en" } = Astro.props;
const t = useTranslations(lang);
---

<section id="contact" class="py-16 lg:py-24 relative z-10 bg-white/[0.01]">
  <div class="mx-auto w-full max-w-[1250px] px-4 lg:px-12">
    <!-- Section Header -->
    <div class="mb-16 text-center">
      <h2
        class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4 flex items-center justify-center gap-4 text-white"
      >
        <span
          class="bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent text-2xl lg:text-3xl font-normal"
          >04.</span
        >
        {t("contact.title")}
      </h2>
      <div
        class="w-24 lg:w-32 h-0.5 bg-gradient-to-r from-cyan-400 to-purple-500 mx-auto rounded-full"
      >
      </div>
    </div>

    <!-- Contact Content -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-start">
      <!-- Contact Info -->
      <div class="text-white/80 space-y-8">
        <div>
          <h3
            class="text-2xl lg:text-3xl font-semibold mb-4 bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent"
          >
            {t("contact.talk")}
          </h3>
          <p class="text-lg leading-relaxed">
            {t("contact.description")}
          </p>
        </div>

        <!-- Contact Methods -->
        <div class="space-y-6">
          <!-- Email -->
          <div class="flex items-center gap-4">
            <div
              class="w-12 h-12 bg-cyan-400/20 rounded-lg flex items-center justify-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-cyan-400"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"
                ></path>
                <path d="M3 7l9 6l9 -6"></path>
              </svg>
            </div>
            <div>
              <p class="text-white/60 text-sm font-medium">
                {t("contact.email")}
              </p>
              <a
                href="mailto:andres.posada.dev@gmail.com"
                class="text-cyan-400 hover:text-purple-500 transition-colors text-lg font-medium"
              >
                andres.posada.dev@gmail.com
              </a>
            </div>
          </div>

          <!-- WhatsApp -->
          <div class="flex items-center gap-4">
            <div
              class="w-12 h-12 bg-cyan-400/20 rounded-lg flex items-center justify-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-cyan-400"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9"></path>
                <path
                  d="M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1"
                ></path>
              </svg>
            </div>
            <div>
              <p class="text-white/60 text-sm font-medium">
                {t("contact.whatsapp")}
              </p>
              <a
                href="https://wa.me/573194283920"
                target="_blank"
                rel="noopener noreferrer"
                class="text-cyan-400 hover:text-purple-500 transition-colors text-lg font-medium"
              >
                +57 319 428 3920
              </a>
            </div>
          </div>

          <!-- Location -->
          <div class="flex items-center gap-4">
            <div
              class="w-12 h-12 bg-cyan-400/20 rounded-lg flex items-center justify-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-cyan-400"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"></path>
                <path
                  d="M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z"
                ></path>
              </svg>
            </div>
            <div>
              <p class="text-white/60 text-sm font-medium">
                {t("contact.location")}
              </p>
              <p class="text-white text-lg font-medium">Bogotá, Colombia</p>
            </div>
          </div>
        </div>

        <!-- Social Links -->
        <div>
          <h4 class="text-lg font-semibold mb-4 text-white">
            {t("contact.socialMedia")}
          </h4>
          <div class="flex gap-4">
            <a
              href="https://github.com/aposadadev"
              target="_blank"
              rel="noopener noreferrer"
              class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center transition-all duration-300 hover:bg-cyan-400/20 hover:text-cyan-400"
              aria-label="GitHub"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
                ></path>
              </svg>
            </a>
            <a
              href="https://linkedin.com/in/aposadadev"
              target="_blank"
              rel="noopener noreferrer"
              class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center transition-all duration-300 hover:bg-cyan-400/20 hover:text-cyan-400"
              aria-label="LinkedIn"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"
                ></path>
                <path d="M8 11l0 5"></path>
                <path d="M8 8l0 .01"></path>
                <path d="M12 16l0 -5"></path>
                <path d="M16 16v-3a2 2 0 0 0 -4 0"></path>
              </svg>
            </a>
            <a
              href="https://twitter.com/aposadadev"
              target="_blank"
              rel="noopener noreferrer"
              class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center transition-all duration-300 hover:bg-cyan-400/20 hover:text-cyan-400"
              aria-label="Twitter"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="text-current"
              >
                <path
                  d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
                ></path>
              </svg>
            </a>
            <a
              href="https://instagram.com/aposadadev"
              target="_blank"
              rel="noopener noreferrer"
              class="w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center transition-all duration-300 hover:bg-cyan-400/20 hover:text-cyan-400"
              aria-label="Instagram"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path
                  d="M4 4m0 4a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z"
                ></path>
                <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
                <path d="M16.5 7.5l0 .01"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>

      <!-- Contact Form -->
      <div
        class="bg-white/5 border border-white/10 rounded-xl lg:rounded-2xl p-6 lg:p-8 backdrop-blur-sm"
      >
        <h3 class="text-2xl font-semibold mb-6 text-white">
          {t("contact.sendMessage")}
        </h3>

        <form
          id="contactForm"
          class="space-y-6"
          action="https://formspree.io/f/xpznqryq"
          method="POST"
        >
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label
                for="name"
                class="block text-sm font-medium text-white/80 mb-2"
              >
                {t("contact.name")} *
              </label>
              <input
                type="text"
                id="name"
                name="name"
                required
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400/50 transition-all duration-300"
                placeholder={lang === "es" ? "Tu nombre" : "Your name"}
              />
            </div>
            <div>
              <label
                for="email"
                class="block text-sm font-medium text-white/80 mb-2"
              >
                Email *
              </label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400/50 transition-all duration-300"
                placeholder={lang === "es" ? "tu@email.com" : "your@email.com"}
              />
            </div>
          </div>

          <div>
            <label
              for="subject"
              class="block text-sm font-medium text-white/80 mb-2"
            >
              {t("contact.subject")} *
            </label>
            <input
              type="text"
              id="subject"
              name="subject"
              required
              class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400/50 transition-all duration-300"
              placeholder={lang === "es"
                ? "¿De qué quieres hablar?"
                : "What would you like to discuss?"}
            />
          </div>

          <div>
            <label
              for="message"
              class="block text-sm font-medium text-white/80 mb-2"
            >
              {t("contact.message")} *
            </label>
            <textarea
              id="message"
              name="message"
              rows="5"
              required
              class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400/50 transition-all duration-300 resize-none"
              placeholder={lang === "es"
                ? "Cuéntame sobre tu proyecto..."
                : "Tell me about your project..."}></textarea>
          </div>

          <button
            type="submit"
            class="w-full px-8 py-3 bg-gradient-to-r from-cyan-400/20 to-purple-500/20 border border-cyan-400/40 text-cyan-400 rounded-lg backdrop-blur-sm font-medium transition-all duration-300 hover:from-cyan-400/30 hover:to-purple-500/30 hover:border-cyan-400/60 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-cyan-400/50"
          >
            {t("contact.send")}
          </button>
        </form>

        <!-- Success/Error Messages -->
        <div id="formMessage" class="mt-4 hidden">
          <p id="messageText" class="text-sm"></p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("contactForm") as HTMLFormElement;
    const messageDiv = document.getElementById("formMessage") as HTMLElement;
    const messageText = document.getElementById("messageText") as HTMLElement;

    if (form) {
      form.addEventListener("submit", async function (e: Event) {
        e.preventDefault();

        const formData = new FormData(form);

        try {
          const response = await fetch(form.action, {
            method: "POST",
            body: formData,
            headers: {
              Accept: "application/json",
            },
          });

          if (response.ok) {
            messageDiv.className = "mt-4 text-green-400";
            messageText.textContent =
              "Message sent successfully! I'll get back to you soon.";
            form.reset();
          } else {
            throw new Error("Form submission failed");
          }
        } catch (error) {
          messageDiv.className = "mt-4 text-red-400";
          messageText.textContent =
            "Oops! Something went wrong. Please try again or contact me directly.";
        }

        messageDiv.classList.remove("hidden");
        setTimeout(() => {
          messageDiv.classList.add("hidden");
        }, 5000);
      });
    }
  });
</script>
